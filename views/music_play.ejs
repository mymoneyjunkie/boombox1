<%- include("./includes/head.ejs", { data2: '' }); %>

<link rel="stylesheet" href="/style.css">
<link rel="stylesheet" href="/all.css">

<body>
  <header>
    <%- include("./includes/header.ejs"); %>
  </header>

  <div class="loading-spinner" id="loadingSpinner">
    <img src="/cube.webp" alt="Your Logo" class="logoSp">
    <div class="spinner"></div>
  </div>
    
  <% if(data12.length >= 1 && heading == 'eye candy videos' || heading == 'sneakers') { %>
    <section id="footer_popup" class="footer_popup">
      <div class="container position-fixed top-0 bg-black" style="z-index: 1050 !important;">
          <div class="row text-white">
              <div class="col-12 fp2 pt-1 pb-1 ps-1 pe-3">
                  <% if(data12[0].title != null || data12[0].title != '') { %>
                    <div class="text-center text-wrap"><%= data12[0].title %></div>
                  <% } %>
                  <div class="d-flex align-items-center justify-content-between">
                    <h6 class="text-wrap text-uppercase" style="font-size: 12px;">
                      <img src="https://i.ibb.co/YTG0NWH/removal-ai-05798ca5-1590-4c7f-ba40-4de1847cf462-hiphop3.png" width="40" height="30" />
                      HipHopBoomBox
                    </h6>
                    <!-- <a href="<%= data12[0].link1 %>" target="_blank" class="btn btn-outline-light">
                      <i class="fa-brands fa-android fa-xl" style="color: #78C257;"></i>
                      <i class="fa-brands fa-apple fa-xl" style="color: #555555;"></i>
                    </a> -->
                    <a 
                       id="platformLink" 
                       href="#" 
                       target="_blank" 
                       class="btn border-0 pt-2 pb-2 pe-3 ps-3 bg-light text-uppercase" 
                       style="color: #ee3483; font-size: 12px; font-weight: 600; border-radius: 50px;"
                    >
                      GET
                    </a>
                  </div>
                
                  <div class="d-flex align-items-center justify-content-between mt-1 text-uppercase">
                    <h6 style="font-size: 12px;">
                      <img src="" id="platformIcon" width="40" height="30" />
                      Website
                    </h6>
                    <button 
                            type="button" 
                            class="btn text-white border pt-2 pb-2 pe-3 ps-3" 
                            id="cont_btn" 
                            style="border-radius: 50px; font-size: 12px; font-weight: 600;"
                    >
                      WEBSITE
                    </button>
                  </div>
              </div>
          </div>
      </div>
    </section>
  <% } %>

  <section>
    <%- include("./includes/nav1.ejs", { myArray: catData, name: heading }); %>
  </section>

  <section>
    <div class="container-fluid musicPlayCont p-0 bg-light">
      <div class="row">
        <div class="col-12 col-sm-12 col-md-2 leftAds" style="background: #f0f0f0;">
          <div class="desktopAds">
            <% if (data13[0] && data13.length > 0) { %>
              <% if (data13[0].code.trim() != '') { %>
                <%- data13[0].code %>
              <% } else { %>
                <a href="#" class="dskLink" data-ads-id="<%= data13[0].ads_id %>" target="_blank" style="text-decoration: none;">
                  <div class="card border-0" style="width: auto;">
                    <img src="https://api.hiphopboombox.com/api/uploads/<%= data13[0].image %>" class="card-img-top" alt="<%= data13[0].title %>">
                  </div>
                </a>
              <% } %>
            <% } else { %>
            <% } %>
          </div>

          <div class="mobileAds">
            <% if (data14[0] && data14.length > 0) { %>
              <a href="#" class="mobLink" data-ads-id="<%= data14[0].ads_id %>" target="_blank" style="text-decoration: none;">
                <div class="card border-0" style="width: auto;">
                  <img src="https://api.hiphopboombox.com/api/uploads/<%= data14[0].image %>" class="card-img-top" alt="<%= data14[0].title %>">
                </div>
              </a>
            <% } else { %>
            <% } %>
          </div>
        </div>

        <% if(showData != '') { %>
          <div class="col-12 col-sm-12 col-md-8 divM12" style="position: relative;">
            <div class="row">
              <div class="col-12 col-sm-12 text-center deskDiv">
              </div>

              <div class="col-12 col-sm-12 p-0 mt-3">
                <div class="row">
                  <div class="col-12 col-md-3 border-0 p-2" style="height: 600px; background-color: transparent;">
                    <div class="d-flex">
                      <form class="d-flex w-100" role="search">
                        <input class="form-control" type="search" placeholder="Search" aria-label="Search">
                      </form>
                    </div>
                    <% data12.results.forEach(i => { %>
                      <a href="#" style="text-decoration: none; color: none;">
                        <div class="d-flex align-items-center mb-2 p-2">
                          <img src="https://api.hiphopboombox.com/api/uploads/<%= i.image %>" data-src="" class="img-fluid music_play_img" />
                          <div class="d-flex flex-column ms-2">
                            <span class="span1"><%= i.name %></span>
                            <span class="span2">Artist</span>
                          </div>
                        </div>
                      </a>
                    <% }) %>
                  </div>
                  <div class="col-12 col-md-6 border-0 pe-2 ps-0 pt-0 pb-0" style="height: 600px; background-color: transparent;">
                    <img src="/zmpig.webp" class="img-fluid artistImg2" />

                    <div class="border-0 p-1 mt-2">
                      <h6>Popular</h6>
                    </div>

                    <div class="d-flex flex-row justify-content-between border-0 w-100 p-0 mt-2">
                      <div class="d-flex w-100 justify-content-around align-items-center">
                        <div>1</div>
                        <img src="https://api.hiphopboombox.com/api/uploads/czRIjBbwGqv87RD.jpeg" class="img-fluid music_play_img" />
                        <div>Song Name1</div>
                      </div>
                      <div class="d-flex w-100 justify-content-around align-items-center">
                        <div>76267890</div>
                        <div>5.67</div>
                      </div>
                    </div>

                    <div class="d-flex flex-row justify-content-between border-0 w-100 p-0 mt-2">
                      <div class="d-flex w-100 justify-content-around align-items-center">
                        <div>2</div>
                        <img src="https://api.hiphopboombox.com/api/uploads/czRIjBbwGqv87RD.jpeg" class="img-fluid music_play_img" />
                        <div>Song Name2</div>
                      </div>
                      <div class="d-flex w-100 justify-content-around align-items-center">
                        <div>76267890</div>
                        <div>5.67</div>
                      </div>
                    </div>

                    <div class="d-flex flex-row justify-content-between border-0 w-100 p-0 mt-2">
                      <div class="d-flex w-100 justify-content-around align-items-center">
                        <div>3</div>
                        <img src="https://api.hiphopboombox.com/api/uploads/czRIjBbwGqv87RD.jpeg" class="img-fluid music_play_img" />
                        <div>Song Name3</div>
                      </div>
                      <div class="d-flex w-100 justify-content-around align-items-center">
                        <div>76267890</div>
                        <div>5.67</div>
                      </div>
                    </div>

                    <div class="d-flex flex-row justify-content-between border-0 w-100 p-0 mt-2">
                      <div class="d-flex w-100 justify-content-around align-items-center">
                        <div>4</div>
                        <img src="https://api.hiphopboombox.com/api/uploads/czRIjBbwGqv87RD.jpeg" class="img-fluid music_play_img" />
                        <div>Song Name4</div>
                      </div>
                      <div class="d-flex w-100 justify-content-around align-items-center">
                        <div>76267890</div>
                        <div>5.67</div>
                      </div>
                    </div>

                  </div>
                  <div class="col-12 col-md-3 border-0 p-0" style="height: 600px; background-color: transparent;">
                    <img src="/zmbig.webp" class="img-fluid artistImg" />
                  </div>
                </div>
              </div>

              <div class="col-12 col-sm-12 p-0 mt-3 music_player bg-light">
                <div class="row p-0">
                  <div class="col-12 col-md-3 p-0 m-0 border-0 d-flex align-items-center">
                    <!-- Image section -->
                    <div class="flex-shrink-0" style="width: 30%;">
                      <img src="/mmms.jpeg" class="img-fluid" style="width: 100%; height: auto; border-radius: 5%;" />
                    </div>

                    <!-- Text section -->
                    <div class="flex-grow-1 ms-2">
                      <p class="mb-0" style="font-weight: bold;">Song Name</p>
                      <p class="mb-0" style="font-size: 12px;">Artist Name</p>
                    </div>

                    <!-- Plus sign section -->
                    <div class="text-center">
                      <h6 class="m-0" style="padding: 0 3px; border: 2px solid black; border-radius: 50%; font-size: 14px; font-weight: bold;">+</h6>
                    </div>
                  </div>

                  <div class="col-12 col-md-6 text-center border-0">
                    <audio controls autoplay muted>
                      <source src="/song1.mp3" type="audio/mp3">
                      Your browser does not support the audio element.
                    </audio>
                  </div>

                  <div class="col-12 col-md-3 border-0 bg-light"></div>
                </div>
              </div>             

              <div class="col-12 col-sm-12" style="height: 50px;"></div>
            </div>
          </div>
        <% } else { %>
          <div class="col-12 col-sm-12 col-md-8 p-0">
            <div class="row">
              <div class="col-12 col-sm-12 text-center mb-5" style="font-weight: 700; font-size: 15px;">No data found...</div>
            </div>
          </div>
        <% } %>

        <div class="col-12 col-sm-12 col-md-2 rightAds" style="background: #f0f0f0;">
          <div class="desktopAds">
            <% if (data13[1] && data13.length > 0) { %>
              <% if (data13[1].code.trim() != '') { %>
                <%- data13[1].code %>
              <% } else { %>
                <a href="#" class="dskLink" data-ads-id="<%= data13[1].ads_id %>" target="_blank" style="text-decoration: none;">
                  <div class="card border-0" style="width: auto;">
                    <img src="https://api.hiphopboombox.com/api/uploads/<%= data13[1].image %>" class="card-img-top" alt="<%= data13[1].title %>">
                  </div>
                </a>
              <% } %>
            <% } else { %>
            <% } %>
          </div>

          <div class="mobileAds">
            <% if (data14[1] && data14.length > 0) { %>
              <a href="#" class="mobLink" data-ads-id="<%= data14[1].ads_id %>" target="_blank" style="text-decoration: none;">
                <div class="card border-0" style="width: auto;">
                  <img src="https://api.hiphopboombox.com/api/uploads/<%= data14[1].image %>" class="card-img-top" alt="<%= data14[1].title %>">
                </div>
              </a>
            <% } else { %>
            <% } %>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <%- include("./includes/footer.ejs"); %>
  </footer>

  <script>
    const data12 = <%- JSON.stringify(data12) %>;
    const data13 = <%- JSON.stringify(data13) %>;
    const data14 = <%- JSON.stringify(data14) %>;
  </script>

  <script type="text/javascript">
    // let currentPage = Number(cp) || 1;

    // console.log(currentPage);
    
    const loadingSpinner = document.getElementById('loadingSpinner');
    // console.log(loadingSpinner);
    
    setTimeout(function() {
      if (loadingSpinner) {
        loadingSpinner.style.display = 'none';
      }
    }, 2000);

      const footer_popup = data12 != '' ? globalThis.document.getElementById("footer_popup") : '';
    
      const popShown = sessionStorage.getItem('popShown');
    
      if (footer_popup) {
        if (popShown) {
          footer_popup.style.display = 'none';
        }
        else {
          footer_popup.style.display = 'block';
        }

        cont_btn.addEventListener('click', (e) => {
          footer_popup.style.display = 'none';
          sessionStorage.setItem('popShown', 'true');
        })
      }

      globalThis.document.addEventListener('DOMContentLoaded', () => {
          function getMobileOS() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;

            // Check for iOS
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                return "iOS";
            }

            // Check for Android
            if (/android/i.test(userAgent)) {
                return "Android";
            }

            return "Unknown";
          }

          const os = getMobileOS();
          // console.log(os);

          globalThis.document.querySelectorAll('.dskLink').forEach(button => {
              const adsId = button.getAttribute('data-ads-id');
              // console.log(adsId);
              addDskLink(adsId, button);
          });

          globalThis.document.querySelectorAll('.mobLink').forEach(button => {
              const adsId = button.getAttribute('data-ads-id');
              // console.log(adsId);
              addMobLink(adsId, button);
          });

          function addDskLink(id, btn) {
                // console.log(id, btn);
                
                const ml1 = data13.length > 0 && 
                  data13.filter(i => Number(i.ads_id) === Number(id))
                                  .map(i => ({ ads_id: i.ads_id, android: i.link_android, ios: i.link_ios }));
            // console.log(ml1);

            const ml2 = data14.length > 0 &&
                  data14.filter(i => Number(i.ads_id) === Number(id))
                                  .map(i => ({ ads_id: i.ads_id, android: i.link_android, ios: i.link_ios }));
            // console.log(ml2);

            if (ml1 == false && ml2.length > 0) {
              if (os == 'iOS') {
                btn.setAttribute("href", ml2[0].ios);
              }

              else {
                btn.setAttribute("href", ml2[0].android);
              }
            }
            else {
              if (os == 'iOS') {
                btn.setAttribute("href", ml1[0].ios);
              }

              else {
                btn.setAttribute("href", ml1[0].android);
              }
            }
          }

          function addMobLink(id, btn) {
                // console.log(id, btn);

            const ml1 = data13.length > 0 && 
                  data13.filter(i => Number(i.ads_id) === Number(id))
                                  .map(i => ({ ads_id: i.ads_id, android: i.link_android, ios: i.link_ios }));
            // console.log(ml1);

            const ml2 = data14.length > 0 &&
                  data14.filter(i => Number(i.ads_id) === Number(id))
                                  .map(i => ({ ads_id: i.ads_id, android: i.link_android, ios: i.link_ios }));
            // console.log(ml2);

            // console.log(ml1 == false && ml2.length > 0);

            if (ml1 == false && ml2.length > 0) {
              if (os == 'iOS') {
                btn.setAttribute("href", ml2[0].ios);
              }

              else {
                btn.setAttribute("href", ml2[0].android);
              }
            }
            else {
              if (os == 'iOS') {
                btn.setAttribute("href", ml1[0].link_ios);
              }

              else {
                btn.setAttribute("href", ml1[0].link_android);
              }
            }
          }

      
          if (footer_popup) {

            function getBrowserInfo() {
              const userAgent = navigator.userAgent;
              let browserName;

              if (userAgent.includes("Chrome")) {
                  browserName = "Google Chrome";
              } else if (userAgent.includes("Firefox")) {
                  browserName = "Mozilla Firefox";
              } else if (userAgent.includes("Safari")) {
                  browserName = "Apple Safari";
              } else if (userAgent.includes("MSIE") || userAgent.includes("Trident")) {
                  browserName = "Internet Explorer";
              } else if (userAgent.includes("Edge")) {
                  browserName = "Microsoft Edge";
              } else {
                  browserName = "Unknown Browser";
              }

              return browserName;
            }

            // Call the function to check the browser
            let brw = getBrowserInfo();
            // console.log(brw); 

            const platformIcon = document.getElementById("platformIcon");
          
            if (brw == 'Google Chrome') {
              platformIcon.setAttribute("src", "https://i.ibb.co/LnxmfV7/chrome1.png");
            }
            else if (brw == 'Mozilla Firefox') {
              platformIcon.setAttribute("src", "https://i.ibb.co/5ThGz4Q/firefox2.png");
            }
            else if (brw == 'Apple Safari') {
              platformIcon.setAttribute("src", "https://i.ibb.co/BwSf5ZK/safari3.png");
            }
            else if (brw == 'Internet Explorer') {
              platformIcon.setAttribute("src", "https://i.ibb.co/yBTdnFn/ie2.png");
            }
            else if (brw == 'Microsoft Edge') {
              platformIcon.setAttribute("src", "https://i.ibb.co/DwSs9yx/removal-ai-838c4b30-aadb-45b7-b124-fc91054bbf79-me2.png");
            }
            else {
              platformIcon.setAttribute("src", "https://i.ibb.co/LnxmfV7/chrome1.png");
            }

            const platformLink = document.getElementById("platformLink");

            platformLink.addEventListener('click', (e) => {
              footer_popup.style.display = 'none';
              sessionStorage.setItem('popShown', 'true');
            })


            if (os === "Android") {
                // platformIcon.classList.add("fa-android");
                // platformIcon.setAttribute("src", "https://i.ibb.co/pJ37VFy/android.png");
                platformLink.setAttribute("href", data12[0].link1);
            } else if (os === "iOS") {
                // platformIcon.setAttribute("src", "https://i.ibb.co/qRC2GsZ/ios4.png");
                platformLink.setAttribute("href", data12[0].link2);
            } else {
                // Handle unknown platform if needed
                // platformIcon.setAttribute("src", "https://i.ibb.co/pJ37VFy/android.png");
                platformLink.setAttribute("href", data12[0].link1);
            }
          }       
          
          const ct1 = document.querySelectorAll('.card-text');

          const ct2 = document.querySelectorAll('.card-title');

          // console.log(ct);

          const heading = document.querySelector('.heading1');

          // console.log(heading);

          const baseImgUrl = "https://api.hiphopboombox.com/api/uploads/";

          const images2 = document.querySelectorAll('.div11 img');

          images2.forEach(img => {
            img.onload = () => {
              img.previousElementSibling.style.display = 'none'; // Hide skeleton
              img.style.display = 'block'; // Show image
            };

            img.onerror = () => {
              // Hide the image
              img.style.display = 'none';
                      
              // Show the skeleton loader
              const skeleton = img.previousElementSibling;
              if (skeleton) {
                skeleton.style.display = 'block';
              }
            };

            const imgElement = img.getAttribute('data-src');
            // console.log(imgElement); 
                    
            // console.log(!imgElement.includes('www.w3schools') && !imgElement.includes('static.worldstarhiphop'));

            if (!imgElement.includes('www.w3schools') && !imgElement.includes('static.worldstarhiphop')) {
                img.setAttribute('src', imgElement);
            }

            else {
              img.setAttribute('src', imgElement); // Set src to trigger loading
            }
          });

          const images3 = document.querySelectorAll('.divM11 img');

          images3.forEach(img => {
            img.onload = () => {
              img.previousElementSibling.style.display = 'none'; // Hide skeleton
              img.style.display = 'block'; // Show image
            };

            img.onerror = () => {
              // Hide the image
              img.style.display = 'none';
                      
              // Show the skeleton loader
              const skeleton = img.previousElementSibling;
              if (skeleton) {
                skeleton.style.display = 'block';
              }
            };

            const imgElement = img.getAttribute('data-src');
            // console.log(imgElement); 
                    
            // console.log(!imgElement.includes('www.w3schools') && !imgElement.includes('static.worldstarhiphop'));

            if (!imgElement.includes('www.w3schools') && !imgElement.includes('static.worldstarhiphop')) {
                img.setAttribute('src', imgElement);
            }

            else {
              img.setAttribute('src', imgElement); // Set src to trigger loading
            }
          });

          function truncateText(text, m) {
            if (text.length > m) {
              return text.slice(0, m).trim() + '...'; // Truncate text and add "..."
            }
            return text;
          }
      })
  </script>
</body>

<%- include("./includes/end.ejs"); %>